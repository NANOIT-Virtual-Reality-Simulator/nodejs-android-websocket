<!DOCTYPE HTML>
<html>
<head>
    <script type="text/javascript" src="smoothie.js"></script>
</head>

<body>
<canvas id="chart" width="400" height="100"></canvas>
<br/>
<a href="javascript:ConnectToWs()">Connect ...</a>

<script type="text/javascript">

        var series = new TimeSeries();

         function ConnectToWs()
         {
            if ("WebSocket" in window)
            {
               var ws = new WebSocket("ws://192.168.1.100:3000");

               ws.onopen = function()
               {
               };

               ws.onmessage = function (evt)
               {
                  var data = JSON.parse(JSON.parse(evt.data).utf8Data);
                  series.append(new Date().getTime(), parseFloat(data.axis_x.replace(',', '.')));
               };

               ws.onclose = function()
               {
               };

            }
            else
            {
               alert("WebSocket NOT supported by your Browser!");
            }
         }

        var smoothie = new SmoothieChart({ grid: { strokeStyle: 'rgb(125, 0, 0)', fillStyle: 'rgb(60, 0, 0)', lineWidth: 1, millisPerLine: 250, verticalSections: 6 } });
        smoothie.addTimeSeries(series, { strokeStyle: 'rgb(0, 255, 0)', fillStyle: 'rgba(0, 255, 0, 0.4)', lineWidth: 3 });
        smoothie.streamTo(document.getElementById("chart"), 1000);
      </script>
</body>
</html>